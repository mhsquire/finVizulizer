version: 2.1

orbs:
  python: circleci/python@2.0.3

commands:
  install-poetry:
    steps:
      - run:
          name: "install poetry"
          command: pip install poetry
  run-pytest:
    steps:
      - run:
          name: "run pytest"
          command: pytest  
jobs:
  run-pytest-bdd-job:
    docker:
      # replace with your preferred image
      - image: cimg/python:3.10.4
    steps:
      - checkout
      - install-poetry
      - python/install-packages:
          pkg-manager: poetry
      - run_pytest

workflows:
  pytest-bdd-workflow:
    jobs:
      - run-pytest-bdd-job
